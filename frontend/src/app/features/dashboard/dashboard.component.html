<div
  class="relative min-h-screen overflow-x-hidden bg-pure text-charcoal md:grid md:grid-cols-[260px_1fr] xl:grid-cols-[280px_1fr] shape-accent"
  (click)="closeSidebar($event)"
>
  <aside
    class="hidden h-full flex-col gap-10 border-r border-steel/20 bg-pure p-8 xl:flex"
  >
    <div class="flex items-center gap-4">
      <span
        class="flex h-12 w-12 items-center justify-center rounded-2xl border border-steel/30 bg-steel/10 text-sm font-semibold tracking-[0.18em] text-steel"
        >AE</span
      >
      <div class="space-y-1">
        <strong class="block font-serif text-lg uppercase tracking-[0.18em] text-charcoal"
          >AK Builders</strong
        >
        <span class="block text-xs uppercase tracking-[0.28em] text-steel"
          >Control Centre</span
        >
      </div>
    </div>

    <nav class="flex flex-1 flex-col gap-2" aria-label="Dashboard navigation">
      <a
        routerLink="/dashboard"
        [routerLinkActiveOptions]="{ exact: true }"
        routerLinkActive
        #overviewRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          overviewRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-chart-line"></i>
        <span>Overview</span>
      </a>
      <a
        routerLink="/dashboard/projects"
        routerLinkActive
        #projectsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          projectsRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-city"></i>
        <span>Property listings</span>
      </a>
      <a
        routerLink="/dashboard/clients"
        routerLinkActive
        #clientsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          clientsRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-user-tie"></i>
        <span>Contact submissions</span>
      </a>
      <a
        routerLink="/dashboard/teams"
        routerLinkActive
        #teamsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          teamsRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-users"></i>
        <span>Advisory team</span>
      </a>

      <a
        routerLink="/dashboard/about-us"
        routerLinkActive
        #aboutRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          aboutRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-circle-info text-lg"></i>
        <span>About Us</span>
      </a>
      <a
        routerLink="/dashboard/about-content"
        routerLinkActive
        #aboutContentRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          aboutContentRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-pen-nib"></i>
        <span>About content</span>
      </a>

      <!-- <a
        routerLink="/dashboard/testimonials"
        routerLinkActive
        #testimonialsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          testimonialsRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-comment-dots"></i>
        <span>Blogs</span>
      </a> -->

      <a
        routerLink="/dashboard/testimonials"
        routerLinkActive
        #testimonialsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition"
        [ngClass]="
          testimonialsRla.isActive
            ? 'bg-brand text-white shadow-md'
            : 'text-slate-600 hover:bg-slate-100 hover:text-slate-900'
        "
      >
        <i class="fas fa-comment-dots"></i>
        <span>Testimonials</span>
      </a>
      <a
        routerLink="/dashboard/blogs"
        routerLinkActive
        #blogsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          blogsRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-newspaper"></i>
        <span>Journal</span>
      </a>
      
      <a
        routerLink="/dashboard/faq"
        routerLinkActive
        #faqRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          faqRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-question-circle"></i>
        <span>FAQ</span>
      </a>
      <a
        routerLink="/dashboard/settings"
        routerLinkActive
        #settingsRla="routerLinkActive"
        class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        [ngClass]="
          settingsRla.isActive
            ? 'bg-brand text-charcoal shadow-industrial-soft'
            : 'text-steel hover:bg-brand/10 hover:text-charcoal'
        "
      >
        <i class="fas fa-gear"></i>
        <span>Settings</span>
      </a>

      <button
        type="button"
        class="mt-auto flex items-center gap-3 rounded-2xl border border-steel/30 px-4 py-3 text-sm font-medium text-steel transition hover:-translate-y-0.5 hover:bg-brand/10 hover:text-charcoal focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure disabled:cursor-not-allowed disabled:opacity-50"
        (click)="logout()"
      >
        <i class="fas fa-sign-out-alt"></i>
        <span>Sign out</span>
      </button>
    </nav>
  </aside>

  <aside
    *ngIf="showSidebar"
    class="fixed inset-0 z-50 flex bg-carbon/40 backdrop-blur-sm xl:hidden"
  >
    <div
      class="flex w-full max-w-xs flex-col gap-6 border-r border-steel/20 bg-pure p-6"
    >
      <div
        class="flex items-center justify-between text-xs uppercase tracking-[0.28em] text-steel"
      >
        <span>Navigate</span>
        <button
          type="button"
          (click)="toggleSidebar()"
          aria-label="Close navigation"
          class="text-2xl text-steel transition hover:text-charcoal focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
        >
          &times;
        </button>
      </div>
      <nav class="flex flex-col gap-2" aria-label="Mobile dashboard navigation">
        <a
          routerLink="/dashboard"
          [routerLinkActiveOptions]="{ exact: true }"
          routerLinkActive
          #mobileOverview="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileOverview.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-chart-line"></i>
          <span>Overview</span>
        </a>
        <a
          routerLink="/dashboard/projects"
          routerLinkActive
          #mobileProjects="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileProjects.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-city"></i>
          <span>Property listings</span>
        </a>
        <a
          routerLink="/dashboard/clients"
          routerLinkActive
          #mobileClients="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileClients.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-user-tie"></i>
          <span>Contact submissions</span>
        </a>
        <a
          routerLink="/dashboard/teams"
          routerLinkActive
          #mobileTeams="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileTeams.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-users"></i>
          <span>Advisory team</span>
        </a>
        <a
          routerLink="/dashboard/about-us"
          routerLinkActive
          #mobileAbout="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileAbout.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-circle-info text-lg"></i>
          <span>About Us</span>
        </a>
        <a
          routerLink="/dashboard/about-content"
          routerLinkActive
          #mobileAboutContent="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileAboutContent.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-pen-nib"></i>
          <span>About content</span>
        </a>
        <a
          routerLink="/dashboard/testimonials"
          routerLinkActive
          #mobileTestimonials="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileTestimonials.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-comment-dots"></i>
          <span>Testimonials</span>
        </a>
        <a
          routerLink="/dashboard/blogs"
          routerLinkActive
          #mobileBlogs="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileBlogs.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-newspaper"></i>
          <span>Journal</span>
        </a>
        <a
          routerLink="/dashboard/faq"
          routerLinkActive
          #mobileFaq="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileFaq.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-question-circle"></i>
          <span>FAQ</span>
        </a>
        <a
          routerLink="/dashboard/settings"
          routerLinkActive
          #mobileSettings="routerLinkActive"
          (click)="closeSidebar()"
          class="flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
          [ngClass]="
            mobileSettings.isActive
              ? 'bg-brand text-charcoal'
              : 'text-steel hover:bg-brand/10 hover:text-charcoal'
          "
        >
          <i class="fas fa-gear"></i>
          <span>Settings</span>
        </a>
        <button
          type="button"
        class="mt-4 flex items-center gap-3 rounded-2xl border border-steel/30 px-4 py-3 text-sm font-medium text-steel transition hover:-translate-y-0.5 hover:border-brand/40 hover:text-charcoal focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure disabled:cursor-not-allowed disabled:opacity-50"
        (click)="logout()"
      >
          <i class="fas fa-sign-out-alt"></i>
          <span>Sign out</span>
        </button>
      </nav>
    </div>
  </aside>

  <div class="relative flex min-h-screen flex-col bg-pure">
    <header
      class="sticky top-0 z-20 flex flex-wrap items-center justify-between gap-4 border-b border-steel/20 bg-pure px-4 py-4 sm:px-6"
    >
      <button
        type="button"
        class="inline-flex h-11 w-11 items-center justify-center rounded-full border border-steel/30 bg-steel/10 text-lg text-steel transition hover:bg-brand/15 hover:text-charcoal focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure xl:hidden"
        (click)="toggleSidebar()"
        aria-label="Toggle navigation"
      >
        <i class="fas fa-bars"></i>
      </button>

      <div class="flex flex-col text-left">
        <span class="text-xs uppercase tracking-[0.28em] text-steel"
          >Welcome back, Agent</span
        >
        <strong class="font-serif text-xl text-charcoal"
          >Performance dashboard</strong
        >
      </div>

      <div class="flex items-center gap-4">
        <div
          class="hidden items-center gap-2 rounded-full border border-steel/30 bg-steel/10 px-4 py-2 text-sm text-steel transition focus-within:border-brand/40 focus-within:ring-2 focus-within:ring-brand/30 lg:flex"
        >
          <i class="fas fa-search"></i>
          <input
            type="text"
            placeholder="Search the portfolio"
            class="w-40 bg-transparent text-sm text-charcoal placeholder:text-steel focus:outline-none"
          />
        </div>
        <button
          class="relative inline-flex h-11 w-11 items-center justify-center rounded-full border border-steel/30 bg-steel/10 text-lg text-steel transition hover:bg-brand/15 hover:text-charcoal focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure disabled:cursor-not-allowed disabled:opacity-50"
          type="button"
          aria-label="Notifications"
        >
          <i class="fas fa-bell"></i>
          <span
            class="absolute right-2 top-2 h-2 w-2 rounded-full bg-power"
          ></span>
        </button>
        <div class="relative" (clickOutside)="closeProfileModal()">
          <button
            class="flex h-11 w-11 items-center justify-center rounded-full border border-brand/40 bg-brand text-sm font-semibold text-charcoal transition hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
            (click)="toggleProfileDropdown()"
          >
            AE
          </button>
          <div
            *ngIf="showProfileDropdown"
            class="absolute right-0 mt-2 w-44 rounded-2xl border border-steel/20 bg-pure p-2 text-sm shadow-industrial-soft"
          >
            <button
              type="button"
              (click)="openProfileModal()"
              class="flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-charcoal transition hover:bg-brand/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
            >
              Profile
            </button>
            <button
              type="button"
              (click)="logout()"
              class="flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-charcoal transition hover:bg-brand/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure"
            >
              Logout
            </button>
          </div>
        </div>
      </div>
    </header>

    <main class="relative flex-1 overflow-hidden" #mainContent>
      <div class="h-full overflow-auto py-6">
        <div class="site-container">
          <router-outlet></router-outlet>
        </div>
      </div>
    </main>
  </div>
</div>

<div
  *ngIf="showProfileModal"
  class="fixed inset-0 z-50 flex items-center justify-center bg-carbon/40 backdrop-blur"
>
  <div
    class="w-[min(92%,28rem)] rounded-3xl border border-steel/20 bg-pure p-6 text-charcoal shadow-industrial-soft sm:p-8"
  >
    <h2 class="font-serif text-2xl">Profile</h2>
    <form
      [formGroup]="profileForm"
      (ngSubmit)="saveProfile()"
      class="mt-6 flex flex-col gap-4"
    >
      <label
        class="text-sm font-semibold uppercase tracking-[0.18em] text-steel"
        >Username</label
      >
      <input
        formControlName="username"
        class="rounded-2xl border border-steel/30 bg-steel/10 px-4 py-2 text-sm text-charcoal placeholder:text-steel focus:border-brand focus:outline-none focus:ring-2 focus:ring-brand/30 disabled:cursor-not-allowed disabled:opacity-60"
      />

      <label
        class="text-sm font-semibold uppercase tracking-[0.18em] text-steel"
        >New Password</label
      >
      <input
        type="password"
        formControlName="password"
        class="rounded-2xl border border-steel/30 bg-steel/10 px-4 py-2 text-sm text-charcoal placeholder:text-steel focus:border-brand focus:outline-none focus:ring-2 focus:ring-brand/30 disabled:cursor-not-allowed disabled:opacity-60"
      />

      <label
        class="text-sm font-semibold uppercase tracking-[0.18em] text-steel"
        >Confirm Password</label
      >
      <input
        type="password"
        formControlName="confirmPassword"
        class="rounded-2xl border border-steel/30 bg-steel/10 px-4 py-2 text-sm text-charcoal placeholder:text-steel focus:border-brand focus:outline-none focus:ring-2 focus:ring-brand/30 disabled:cursor-not-allowed disabled:opacity-60"
      />

      <div class="mt-4 flex flex-wrap justify-end gap-3">
        <button
          type="button"
          class="rounded-full border border-steel/40 px-5 py-2 text-sm font-semibold text-steel transition hover:border-brand/40 hover:text-charcoal focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure disabled:cursor-not-allowed disabled:opacity-50"
          (click)="closeProfileModal()"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="rounded-full bg-brand px-5 py-2 text-sm font-semibold text-charcoal shadow-industrial-soft transition hover:-translate-y-0.5 hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-pure disabled:cursor-not-allowed disabled:opacity-50"
        >
          Save changes
        </button>
      </div>
    </form>
  </div>
</div>
