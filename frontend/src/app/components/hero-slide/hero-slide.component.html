<section
  *ngIf="slides.length; else heroSkeleton"
  class="relative w-full overflow-hidden bg-background-light dark:bg-background-dark"
  aria-live="polite"
>
  <div *ngIf="activeSlide as active" class="max-w-[1440px] mx-auto grid grid-cols-1 lg:grid-cols-2 min-h-[600px]">
    <div class="flex flex-col justify-center px-6 py-12 md:px-12 lg:px-20 z-10">
      <div class="flex flex-col gap-6 animate-fade-in">
        <div class="flex items-center gap-3">
          <span
            class="bg-primary/10 text-primary text-xs font-bold px-3 py-1.5 rounded uppercase tracking-wider shadow-sm"
          >
            {{ active.topic }}
          </span>
        </div>
        <h1 class="text-[#111418] dark:text-white text-4xl md:text-6xl font-black leading-tight tracking-tight">
          {{ active.title }}
        </h1>
        <p class="text-[#637588] dark:text-gray-300 text-lg md:text-xl font-medium flex items-center gap-2 max-w-[600px]">
          <i class="ri-map-pin-line text-primary" aria-hidden="true"></i>
          {{ active.address || active.author }}
        </p>
        <p class="text-[#637588] dark:text-gray-400 text-base leading-relaxed max-w-[550px]">
          {{ active.des }}
        </p>
        <div class="flex flex-wrap gap-4 pt-4">
          <a
            class="bg-primary hover:bg-primary/90 text-white px-8 py-4 rounded-lg text-base font-bold shadow-lg transition-all whitespace-nowrap flex items-center gap-2 group/btn"
            [routerLink]="['/projectdetails', active.id]"
            [attr.aria-label]="'Explore ' + active.title"
          >
            <span>Schedule a viewing</span>
            <i class="ri-arrow-right-up-line text-lg transition-transform group-hover/btn:translate-x-1"></i>
          </a>
          <a
            class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 text-[#111418] dark:text-white px-8 py-4 rounded-lg text-base font-bold transition-all whitespace-nowrap"
            [routerLink]="['/projects']"
            aria-label="Browse all projects"
          >
            See the full portfolio
          </a>
        </div>
        <div class="flex flex-wrap gap-3 pt-4 text-sm text-[#637588] dark:text-gray-400">
          <div
            *ngIf="active.landArea || active.builtUpArea"
            class="flex items-center gap-2 rounded-lg bg-white/80 dark:bg-gray-900/50 px-3 py-2"
          >
            <span class="font-bold text-[#111418] dark:text-gray-200">
              {{ active.landArea || active.builtUpArea }}
            </span>
            <span>Area</span>
          </div>
          <div
            *ngIf="active.numberOfApartments"
            class="flex items-center gap-2 rounded-lg bg-white/80 dark:bg-gray-900/50 px-3 py-2"
          >
            <span class="font-bold text-[#111418] dark:text-gray-200">
              {{ active.numberOfApartments }}
            </span>
            <span>Apartments</span>
          </div>
          <div
            *ngIf="active.numberOfParking"
            class="flex items-center gap-2 rounded-lg bg-white/80 dark:bg-gray-900/50 px-3 py-2"
          >
            <span class="font-bold text-[#111418] dark:text-gray-200">
              {{ active.numberOfParking }}
            </span>
            <span>Parking</span>
          </div>
          <div class="flex items-center gap-2 rounded-lg bg-white/80 dark:bg-gray-900/50 px-3 py-2">
            <span class="font-bold text-[#111418] dark:text-gray-200">
              {{ slides.length }}
            </span>
            <span>Highlights</span>
          </div>
        </div>
        <div class="pt-4">
          <div class="text-xs font-semibold uppercase tracking-widest text-[#637588] dark:text-gray-400">
            Spotlight rhythm
          </div>
          <div class="mt-2 h-1 w-full rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden">
            <div
              class="h-full bg-primary transition-transform duration-300"
              [style.transform]="'scaleX(' + progress / 100 + ')'
              "
              style="transform-origin: left;"
            ></div>
          </div>
          <div class="mt-2 text-xs text-[#637588] dark:text-gray-400">
            {{ currentIndex + 1 | number : '2.0' }} / {{ slides.length | number : '2.0' }}
          </div>
        </div>
      </div>
    </div>

    <div class="relative w-full h-[400px] lg:h-auto overflow-hidden">
      <div class="absolute inset-0 w-full h-full">
        <img
          [src]="active.image"
          [alt]="active.alt || 'Project visual'"
          class="w-full h-full object-cover transition-transform duration-[2000ms] hover:scale-105"
          loading="lazy"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent lg:bg-none"></div>
      </div>
      <div class="absolute bottom-6 right-6 flex gap-3">
        <button
          type="button"
          (click)="prev()"
          aria-label="Previous highlight"
          class="h-10 w-10 rounded-full bg-white/80 text-[#111418] shadow-lg transition hover:bg-white"
        >
          <span aria-hidden="true">&larr;</span>
        </button>
        <button
          type="button"
          (click)="next()"
          aria-label="Next highlight"
          class="h-10 w-10 rounded-full bg-white/80 text-[#111418] shadow-lg transition hover:bg-white"
        >
          <span aria-hidden="true">&rarr;</span>
        </button>
      </div>
    </div>
  </div>
</section>

<ng-template #heroSkeleton>
  <section
    class="relative isolate flex h-[480px] items-center justify-center overflow-hidden bg-gradient-to-br from-brand to-emerald-900"
    aria-busy="true"
  >
    <div class="h-32 w-32 animate-pulse rounded-full bg-white/10"></div>
  </section>
</ng-template>
