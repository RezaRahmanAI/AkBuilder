<div class="bg-pure text-carbon min-h-screen">
<main class="site-container flex-1 w-full py-10 md:py-14">
    <!-- Breadcrumbs -->
    <nav class="flex flex-wrap gap-2 py-4 mb-2 items-center text-sm font-medium text-steel">
      <a routerLink="/" class="hover:text-accent transition-colors">Home</a>
      <span class="text-steel/60">/</span>
      <a routerLink="/blogs" class="hover:text-accent transition-colors">News</a>
      <span class="text-steel/60">/</span>
      <span class="text-carbon">Blog Details</span>
    </nav>

    <!-- Article Header -->
    <div class="flex flex-col gap-6 mb-8 max-w-4xl mx-auto">
      <div class="flex">
        <span
          class="inline-flex items-center justify-center px-3 py-1 rounded-full bg-brand/10 text-accent text-xs font-bold uppercase tracking-wider"
        >
          {{ data()?.category || 'Blog' }}
        </span>
      </div>

      <h1 class="text-4xl md:text-5xl lg:text-6xl font-black leading-[1.1] tracking-tight text-carbon">
        {{ data()?.title || 'Blog title loading...' }}
      </h1>

      <p class="text-xl md:text-2xl text-steel italic leading-relaxed">
        {{ data()?.subtitle || 'Explore the latest insights and stories from the Ashaven team.' }}
      </p>

      <div class="flex flex-col sm:flex-row sm:items-center justify-between border-t border-b border-steel/20 py-5 mt-4 gap-4">
        <div class="flex items-center gap-4">
          <div
            class="w-12 h-12 rounded-full bg-steel/20 bg-cover bg-center ring-2 ring-pure"
            [ngStyle]="{ backgroundImage: data()?.picture ? 'url(' + data()?.picture + ')' : 'url(/images/fallback.png)' }"
            [attr.aria-label]="data()?.name || 'Author avatar'"
          ></div>
          <div class="flex flex-col">
            <span class="text-carbon font-bold text-base">{{ data()?.name || 'Ashaven Team' }}</span>
            <span class="text-steel text-sm">
              {{ data()?.postedDate ? (data()?.postedDate | date: 'MMM d, y') : 'Loading date...' }} â€¢
              {{ data()?.readingTime || '5 min read' }}
            </span>
          </div>
        </div>
        <div class="flex gap-2 text-steel self-start sm:self-center">
          <button class="flex items-center gap-2 px-3 py-2 hover:bg-pure/70 rounded-full transition-colors text-sm font-medium group">
            <span class="material-symbols-outlined text-[20px] group-hover:text-accent">share</span>
            <span class="hidden sm:inline">Share</span>
          </button>
          <button class="flex items-center gap-2 px-3 py-2 hover:bg-pure/70 rounded-full transition-colors text-sm font-medium group">
            <span class="material-symbols-outlined text-[20px] group-hover:text-accent">bookmark_border</span>
            <span class="hidden sm:inline">Save</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Hero Image -->
    <figure class="w-full mb-12">
      <div class="w-full aspect-[16/10] md:aspect-[21/9] rounded-xl overflow-hidden bg-steel/10 shadow-sm border border-steel/20">
        <img
          [src]="data()?.image"
          alt="Blog hero image"
          class="w-full h-full object-cover transform hover:scale-105 transition-transform duration-700"
          id="blogImage"
          (error)="onImageError($event)"
        />
      </div>
      <figcaption class="mt-3 text-center text-sm text-steel italic">
        {{ data()?.caption || data()?.title || 'Explore the latest from our newsroom.' }}
      </figcaption>
    </figure>

    <!-- Article Body -->
    <article class="relative flex flex-col md:flex-row gap-12">
      <aside class="hidden md:flex flex-col gap-6 sticky top-24 h-fit w-12 shrink-0 items-center pt-2">
        <span class="text-[10px] font-bold text-steel uppercase tracking-widest [writing-mode:vertical-rl] rotate-180">Share Article</span>
        <div class="h-8 w-[1px] bg-steel/30"></div>
        <a class="group w-10 h-10 flex items-center justify-center rounded-full bg-pure border border-steel/20 text-steel hover:bg-accent hover:border-accent hover:text-carbon transition-all shadow-sm" href="#">
          <span class="material-symbols-outlined text-[18px]">mail</span>
        </a>
        <a class="group w-10 h-10 flex items-center justify-center rounded-full bg-pure border border-steel/20 text-steel hover:bg-accent hover:border-accent hover:text-carbon transition-all shadow-sm" href="#">
          <span class="material-symbols-outlined text-[18px]">link</span>
        </a>
        <a class="group w-10 h-10 flex items-center justify-center rounded-full bg-pure border border-steel/20 text-steel hover:bg-accent hover:border-accent hover:text-carbon transition-all shadow-sm" href="#">
          <span class="material-symbols-outlined text-[18px]">print</span>
        </a>
      </aside>

      <div class="flex-1 max-w-none md:max-w-2xl mx-auto leading-loose">
        <div
          class="article-content prose prose-lg max-w-none text-carbon prose-headings:text-carbon prose-a:text-accent prose-strong:text-carbon"
          [innerHTML]="data()?.description || fallbackDescription"
        ></div>

        <div class="flex flex-wrap gap-2 mt-16 pt-8 border-t border-steel/20">
          <span class="text-sm font-bold text-steel mr-2 self-center uppercase tracking-wider">Tags:</span>
          <ng-container *ngIf="data()?.tags?.length; else defaultTags">
            <a
              *ngFor="let tag of data()?.tags"
              class="px-3 py-1 bg-pure border border-steel/20 hover:border-accent rounded-full text-sm text-steel transition-colors font-medium"
              href="#"
            >
              #{{ tag }}
            </a>
          </ng-container>
          <ng-template #defaultTags>
            <a class="px-3 py-1 bg-pure border border-steel/20 hover:border-accent rounded-full text-sm text-steel transition-colors font-medium" href="#">#News</a>
            <a class="px-3 py-1 bg-pure border border-steel/20 hover:border-accent rounded-full text-sm text-steel transition-colors font-medium" href="#">#Insights</a>
            <a class="px-3 py-1 bg-pure border border-steel/20 hover:border-accent rounded-full text-sm text-steel transition-colors font-medium" href="#">#Updates</a>
          </ng-template>
        </div>
      </div>
    </article>
  </main>

  <!-- Related Articles -->
  <section class="bg-pure py-16 border-t border-steel/20 mt-8">
    <div class="site-container">
      <div class="flex items-center justify-between mb-10">
        <h2 class="text-3xl font-bold text-carbon">Related News</h2>
        <a routerLink="/blogs" class="text-accent font-bold text-sm hover:underline">View All</a>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8" *ngIf="list().length; else emptyRelated">
        <article class="group flex flex-col gap-4 cursor-pointer" *ngFor="let item of list() | slice:0:3">
          <div class="aspect-[4/3] w-full overflow-hidden rounded-lg bg-steel/10 relative">
            <div
              class="absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110"
              [ngStyle]="{ backgroundImage: 'url(' + item.image + ')' }"
              [attr.aria-label]="item.title"
            ></div>
          </div>
          <div class="flex flex-col gap-2">
            <span class="text-xs font-bold text-accent uppercase tracking-wider">{{ item.category || 'News' }}</span>
            <a [routerLink]="['/blogs', item.id]" class="text-xl font-bold text-carbon group-hover:text-accent transition-colors leading-tight">
              {{ item.title }}
            </a>
            <span class="text-sm text-steel">{{ item.postedDate | date: 'MMM d, y' }}</span>
          </div>
        </article>
      </div>
      <ng-template #emptyRelated>
        <p class="text-steel">More stories coming soon.</p>
      </ng-template>
    </div>
  </section>
</div>
