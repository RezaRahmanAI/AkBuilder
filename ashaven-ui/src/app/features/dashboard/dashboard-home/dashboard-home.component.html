<section class="grid gap-8 md:gap-10">
  <!-- HERO -->
  <header
    class="flex flex-wrap items-center justify-between gap-6 md:gap-10 rounded-xl border border-slate-200 bg-white p-6 md:p-8 shadow-sm"
  >
    <div class="max-w-2xl">
      <span class="uppercase tracking-wider text-xs text-slate-500">Portfolio Intelligence</span>
      <h1 class="font-serif text-[1.8rem] md:text-4xl leading-tight mt-2 mb-4">
        Your luxury real estate command centre
      </h1>
    </div>
  </header>

  <!-- MAIN GRID: Left = Active portfolio, Right = Metrics stacked -->
  <div class="grid gap-6 lg:grid-cols-2">
    <!-- Left: Active portfolio -->
    <section class="grid gap-5 rounded-xl border border-slate-200 bg-white p-6 md:p-8 shadow-sm">
      <header class="flex items-start justify-between gap-4">
        <h2 class="font-serif text-xl">Active portfolio</h2>
        <a routerLink="/dashboard/projects" class="text-brand hover:opacity-80 underline underline-offset-4">
          View all listings
        </a>
      </header>

      <div class="overflow-x-auto rounded-lg border border-slate-200">
        <table class="w-full min-w-[520px] border-collapse text-left">
          <thead class="bg-slate-100 uppercase tracking-wider text-[0.72rem] text-slate-600">
            <tr>
              <th class="py-3 px-4">Residence</th>
              <th class="py-3 px-4">Location</th>
              <th class="py-3 px-4">Status</th>
              <th class="py-3 px-4">Published</th>
            </tr>
          </thead>
          <tbody class="[&_tr:nth-child(even)]:bg-slate-50">
            <tr *ngFor="let project of projects | slice:0:6">
              <td class="py-3 px-4">{{ project.name }}</td>
              <td class="py-3 px-4">{{ project.address || '—' }}</td>
              <td class="py-3 px-4">{{ project.category || '—' }}</td>
              <td class="py-3 px-4">{{ project.createDate | date: 'yyyy-MM-dd' }}</td>
            </tr>
            <tr *ngIf="projects.length === 0 && !projectsError">
              <td colspan="4" class="py-3 px-4">No listings available yet. Add your first residence.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Right: Metrics stacked (top/bottom) -->
    <div class="grid gap-6">
      <!-- Managed listings (TOP) -->
      <article class="grid gap-2 rounded-lg border border-slate-200 bg-white p-7 shadow-sm">
        <span class="uppercase tracking-[0.2em] text-[0.72rem] text-slate-500">Managed listings</span>
        <strong class="font-serif text-4xl md:text-[2.6rem] text-slate-900">{{ projects.length }}</strong>
        <small *ngIf="projectsError" class="text-rose-500">{{ projectsError }}</small>

        <div class="grid gap-2 text-slate-600 text-sm">
          <span class="relative block h-10 rounded-xl overflow-hidden bg-slate-100">
            <span
              class="absolute inset-y-0 left-0 rounded-xl bg-gradient-to-r from-brand to-accent"
              [style.width.%]="(projects.length % 12) / 12 * 100"
            ></span>
          </span>
        </div>
      </article>

      <!-- Client inquiries (BOTTOM) -->
      <article class="grid gap-2 rounded-lg border border-slate-200 bg-white p-7 shadow-sm">
        <span class="uppercase tracking-[0.2em] text-[0.72rem] text-slate-500">Client inquiries</span>
        <strong class="font-serif text-4xl md:text-[2.6rem] text-slate-900">{{ totalInquiries }}</strong>
        <small *ngIf="inquiriesError" class="text-rose-500">{{ inquiriesError }}</small>

        <div class="grid gap-2 text-slate-600 text-sm">
          <span class="relative block h-2.5 rounded-full overflow-hidden bg-slate-100">
            <span
              class="absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-brand to-accent"
              [style.width.%]="Math.min(totalInquiries, 100)"
            ></span>
          </span>
          <span>{{ totalInquiries | number }} touch points this quarter</span>
        </div>
      </article>
    </div>
  </div>
</section>
