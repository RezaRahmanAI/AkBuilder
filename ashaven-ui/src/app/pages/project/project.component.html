<div class="relative overflow-hidden text-ink">
  <app-page-hero
    eyebrow="Portfolio"
    title="Residences shaped for light, calm, and community"
    subtitle="Browse ongoing, upcoming, and completed projects with curated galleries, amenities, and live availability. Filters stay anchored for quick discovery."
    accent="Rajshahi flagship collection"
    ctaLabel="Talk to a specialist"
    ctaLink="/contact"
    secondaryLabel="View gallery"
    secondaryLink="/gallery"
    [stats]="[
      { label: 'Curated listings', value: (state.list?.length || 0) + ' live', detail: 'Updated in real-time' },
      { label: 'Categories', value: '3 modes', detail: 'Ongoing • Upcoming • Completed' },
      { label: 'Project types', value: 'Residential / Commercial', detail: 'Configured by intent' },
      { label: 'Site visits', value: 'Bookable', detail: 'Schedule from details page' }
    ]"
  />

  <section id="project-filters" class="relative -mt-14 pb-16">
    <div class="mx-auto w-[min(1180px,92%)] md:w-[80%]">
      <div
        class="rounded-3xl border border-brand/15 bg-pure/90 p-6 shadow-[0_24px_60px_rgba(19,53,31,0.15)] backdrop-blur md:p-10"
      >
        <div class="flex flex-col gap-6 pb-6">
          <div class="space-y-3">
            <h2 class="text-2xl font-semibold text-brand">
              Tailor your discovery
            </h2>
            <!-- <p class="max-w-2xl text-sm text-brand/70">
              Narrow the collection by project momentum and typology to find the experience that aligns with your aspirations.
            </p> -->
          </div>
          <div
            class="flex flex-wrap items-center gap-4 text-xs font-semibold uppercase tracking-[0.18em] text-brand/70"
          >
            <span class="inline-flex items-center gap-2">
              <span
                class="h-3 w-3 rounded-full bg-gradient-to-br from-brand to-emerald-500"
              ></span>
              Ongoing
            </span>
            <span class="inline-flex items-center gap-2">
              <span
                class="h-3 w-3 rounded-full bg-gradient-to-br from-accent to-orange-400"
              ></span>
              Upcoming
            </span>
            <span class="inline-flex items-center gap-2">
              <span
                class="h-3 w-3 rounded-full bg-gradient-to-br from-emerald-200 to-emerald-400"
              ></span>
              Completed
            </span>
          </div>
        </div>

        <div
          class="grid gap-6 md:grid-cols-[repeat(3,minmax(0,1fr))] md:items-end"
        >
          <label
            class="flex flex-col gap-2 text-sm font-semibold uppercase tracking-[0.18em] text-brand/60"
          >
            Project category
            <select
              #categorySelect
              id="category"
              name="category"
              class="w-full rounded-2xl border border-brand/20 bg-white/90 px-4 py-3 text-base font-medium text-brand shadow-sm outline-none transition focus:border-accent focus:shadow-[0_0_0_3px_rgba(255,119,27,0.2)]"
            >
              <option value="all" selected>All Categories</option>
              <option value="Ongoing">Ongoing</option>
              <option value="Upcoming">Upcoming</option>
              <option value="Completed">Completed</option>
            </select>
          </label>

          <label
            class="flex flex-col gap-2 text-sm font-semibold uppercase tracking-[0.18em] text-brand/60"
          >
            Project type
            <select
              #typeSelect
              id="type"
              name="type"
              class="w-full rounded-2xl border border-brand/20 bg-white/90 px-4 py-3 text-base font-medium text-brand shadow-sm outline-none transition focus:border-accent focus:shadow-[0_0_0_3px_rgba(255,119,27,0.2)]"
            >
              <option value="all" selected>All Types</option>
              <option value="Residential">Residential</option>
              <option value="Commercial">Commercial</option>
            </select>
          </label>

          <div class="flex flex-wrap gap-3">
            <button
              (click)="getActiveProjects()"
              aria-label="Apply filters"
              class="inline-flex items-center gap-2 rounded-full bg-accent px-6 py-3 text-sm font-semibold text-pure shadow-lg shadow-[0_18px_45px_rgba(255,119,27,0.35)] transition hover:-translate-y-0.5 hover:bg-orange-500"
            >
              <i class="ri-filter-line"></i>
              Filter results
            </button>
            <button
              (click)="resetFilters()"
              aria-label="Reset filters"
              class="inline-flex items-center gap-2 rounded-full border border-brand/20 px-6 py-3 text-sm font-semibold text-brand/70 transition hover:-translate-y-0.5 hover:border-brand hover:text-brand"
            >
              <i class="ri-restart-line"></i>
              Reset
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="pb-20">
    <div class="mx-auto w-[min(1180px,92%)] md:w-[80%]">
      <header
        class="flex flex-col gap-4 pb-10 sm:flex-row sm:items-end sm:justify-between"
      >
        <div class="space-y-3">
          <h2 class="font-serif text-3xl font-semibold text-brand">
            Featured developments
          </h2>
          
        </div>
        <div
          *ngIf="state.list.length"
          class="inline-flex items-baseline gap-2 rounded-full border border-brand/20 px-4 py-2 text-sm font-semibold text-brand/70"
        >
          <span class="text-xl font-bold text-brand">{{
            state.list.length
          }}</span>
          curated results
        </div>
      </header>

      <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
  <article *ngFor="let item of state.list" class="project-card group">
    <a [routerLink]="['/projectdetails', item.id]" class="project-card__link">
      <div class="project-card__image">
        <img
          [src]="baseUrl + '/api/attachment/get/' + item.thumbnail"
          [attr.alt]="item.name || 'Project image'"
          loading="lazy"
          (error)="onImageError($event)"
        />
        <div class="project-card__overlay"></div>
        <div class="project-card__meta">
          <span class="project-chip">
            <i class="ri-time-line"></i>
            {{ item.category || 'In development' }}
          </span>
          <span class="project-chip">
            <i class="ri-building-4-line"></i>
            {{ item.type || 'Mixed use' }}
          </span>
        </div>
      </div>

      <div class="project-card__body">
        <h3>{{ item.name }}</h3>
        <p>{{ item.address || 'Address forthcoming' }}</p>
        <span class="project-card__cta">
          View details
          <i class="ri-arrow-right-line"></i>
        </span>
      </div>
    </a>
  </article>

  <div *ngIf="!state.list.length" class="col-span-full rounded-3xl border border-dashed border-brand/20 bg-white/80 p-10 text-center text-brand/70">
    No projects match your filters. Try adjusting criteria.
  </div>
</div>
    </div>
  </section>

  <section class="pb-24">
    <div
      class="mx-auto w-[min(1180px,92%)] md:w-[80%] rounded-3xl bg-gradient-to-br from-brand to-emerald-900 px-8 py-12 text-center text-white shadow-[0_30px_80px_rgba(19,53,31,0.25)]"
    >
      <h2 class="font-serif text-3xl font-semibold">
        Envision your next address with As Haven
      </h2>
      <p class="mx-auto mt-4 max-w-2xl text-base text-white/80">
        Partner with our advisory team for bespoke walkthroughs, investment
        guidance, and curated previews of upcoming releases.
      </p>
      <a
        href="/contact"
        class="mt-6 inline-flex items-center gap-2 rounded-full bg-accent px-6 py-3 text-sm font-semibold text-pure shadow-lg transition hover:-translate-y-0.5 hover:bg-orange-500"
      >
        Connect with us
        <i class="ri-arrow-right-up-line"></i>
      </a>
    </div>
  </section>
</div>
